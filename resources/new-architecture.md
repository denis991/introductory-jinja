# üî®–ü–µ—Ä–µ–ø–∏—Å–∞—Ç—å Flask/Jinja‚Äë–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ Clean (Hexagonal) + Repository + Service Layer

**–¶–µ–ª—å:**
–ü–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ–ø–∏—Å–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–µ Flask/Jinja‚Äë–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, —Å–æ—Ö—Ä–∞–Ω–∏–≤ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª, –Ω–æ —É—Å—Ç—Ä–æ–∏—Ç—å –µ–≥–æ –ø–æ Clean (Hexagonal) –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ —Å Repository –∏ Service-—Å–ª–æ—è–º–∏ ‚Äî —Ç–∞–∫ —Ç—ã –ø–æ–ª—É—á–∏—à—å —á—ë—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –¥–æ–º–µ–Ω–∞, –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤, –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ –ø–æ —Ñ–∏—á–∞–º, –∏–∑–æ–ª—è—Ü–∏—é, —è—Å–Ω—ã–µ –≥—Ä–∞–Ω–∏—Ü—ã –∏ –æ—Ç–ª–∏—á–Ω—É—é –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å. –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –≤ —Ñ–æ—Ä–º–∞—Ç–µ Markdown, —á—Ç–æ–±—ã –ª–µ–≥–∫–æ —Å–∫–∞—á–∞—Ç—å –∏ –ø–µ—Ä–µ–¥–∞—Ç—å Cursor.

---

## üß± 1. –û–±—â–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```tree

app/
‚îú‚îÄ‚îÄ core/                         # –Ø–¥—Ä–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ **init**.py              # create\_app()
‚îÇ   ‚îú‚îÄ‚îÄ config.py                # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
‚îÇ   ‚îî‚îÄ‚îÄ extensions.py            # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Flask, SQLAlchemy –∏ –¥—Ä.
‚îÇ
‚îú‚îÄ‚îÄ infra/                        # –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞
‚îÇ   ‚îú‚îÄ‚îÄ db/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ **init**.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ models/              # SQLAlchemy‚Äë–º–æ–¥–µ–ª–∏
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ repositories/        # –î–æ—Å—Ç—É–ø –∫ –¥–∞–Ω–Ω—ã–º
‚îÇ   ‚îî‚îÄ‚îÄ external/                # –ö–ª–∏–µ–Ω—Ç—ã –≤–Ω–µ—à–Ω–∏—Ö API
‚îÇ
‚îú‚îÄ‚îÄ features/                     # –ú–æ–¥—É–ª–∏‚Äë—Ñ–∏—á–∏
‚îÇ   ‚îú‚îÄ‚îÄ home/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ routes.py            # Blueprint + –º–∞—Ä—à—Ä—É—Ç—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ services.py          # –ë–∏–∑–Ω–µ—Å‚Äë–ª–æ–≥–∏–∫–∞
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ templates/           # Jinja‚Äë—à–∞–±–ª–æ–Ω—ã
‚îÇ   ‚îî‚îÄ‚îÄ admin/
‚îÇ       ‚îú‚îÄ‚îÄ routes.py
‚îÇ       ‚îú‚îÄ‚îÄ services.py
‚îÇ       ‚îî‚îÄ‚îÄ templates/
‚îÇ
‚îú‚îÄ‚îÄ interfaces/                   # –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã
‚îÇ   ‚îú‚îÄ‚îÄ controllers/             # Error‚Äëhandlers, —Ñ–∏–ª—å—Ç—Ä—ã, CLI
‚îÇ   ‚îú‚îÄ‚îÄ templates/               # –û–±—â–∏–µ –º–∞–∫–µ—Ç—ã –∏ layout‚Äô—ã
‚îÇ   ‚îî‚îÄ‚îÄ static/                  # CSS, JS, –∫–∞—Ä—Ç–∏–Ω–∫–∏
‚îÇ
‚îú‚îÄ‚îÄ shared/                       # –£—Ç–∏–ª–∏—Ç—ã –∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–µ
‚îÇ   ‚îú‚îÄ‚îÄ utils.py
‚îÇ   ‚îú‚îÄ‚îÄ mixins.py
‚îÇ   ‚îî‚îÄ‚îÄ templates/               # –û–±—â–∏–µ —à–∞–±–ª–æ–Ω—ã
‚îÇ
‚îú‚îÄ‚îÄ tests/                        # –ü–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏
‚îÇ   ‚îú‚îÄ‚îÄ unit/
‚îÇ   ‚îî‚îÄ‚îÄ integration/
‚îÇ
‚îú‚îÄ‚îÄ Dockerfile
‚îú‚îÄ‚îÄ docker-compose.yml
‚îî‚îÄ‚îÄ requirements.txt
```

---

## üß∞ 2. –ü–∞—Ç—Ç–µ—Ä–Ω—ã –∏ —Å–ª–æ–∏

- **Clean (Hexagonal) Architecture**
  ‚Ä¢ –Ø–¥—Ä–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Å –±–∏–∑–Ω–µ—Å‚Äë–ª–æ–≥–∏–∫–æ–π –Ω–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∏ UI.
  ‚Ä¢ –í–Ω–µ—à–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã –ø–æ–¥–∫–ª—é—á–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ –ø–æ—Ä—Ç—ã –∏ –∞–¥–∞–ø—Ç–µ—Ä—ã.

- **Repository Pattern**
  ‚Ä¢ –í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö –∏–¥—É—Ç —á–µ—Ä–µ–∑ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ (`infra/db/repositories`).

- **Service Layer**
  ‚Ä¢ –ë–∏–∑–Ω–µ—Å‚Äë–ø—Ä–∞–≤–∏–ª–∞ –∏ –ª–æ–≥–∏–∫–∞ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ `services.py` –≤–Ω—É—Ç—Ä–∏ –∫–∞–∂–¥–æ–π —Ñ–∏—á–∏.

- **Modules ‚âà Features**
  ‚Ä¢ –ö–∞–∂–¥–∞—è —Ñ–∏—á–∞ ‚Äî —ç—Ç–æ –æ—Ç–¥–µ–ª—å–Ω—ã–π –º–æ–¥—É–ª—å —Å –º–∞—Ä—à—Ä—É—Ç–æ–º, —Å–µ—Ä–≤–∏—Å–∞–º–∏ –∏ —à–∞–±–ª–æ–Ω–∞–º–∏.

---

## üß≠ 3. –®–∞–≥–∏ –ø–µ—Ä–µ–ø–∏—Å—ã–≤–∞–Ω–∏—è

1. –ü–µ—Ä–µ–Ω–µ—Å–∏ **–º–æ–¥–µ–ª–∏ SQLAlchemy** –≤ `infra/db/models/`.
2. –°–æ–∑–¥–∞–π **—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏** –¥–ª—è –Ω–∏—Ö –≤ `infra/db/repositories/`.
3. –í –∫–∞–∂–¥–æ–π —Ñ–∏—á–µ –≤—ã–¥–µ–ª–∏ –±–∏–∑–Ω–µ—Å‚Äë–ª–æ–≥–∏–∫–∏ –≤ `features/<feature>/services.py`.
4. –ü–µ—Ä–µ–Ω–µ—Å–∏ Flask‚Äë–º–∞—Ä—à—Ä—É—Ç—ã –∏ Blueprint‚Äë—Ñ–∞–π–ª—ã –≤ `features/<feature>/routes.py`.
5. –û–ø—Ä–µ–¥–µ–ª–∏ –±–∞–∑–æ–≤—ã–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, `UserRepository`, `ProductRepository`) –∏ –∞–¥–∞–ø—Ç–µ—Ä—ã –≤ **–∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–µ**.
6. –ù–∞—Å—Ç—Ä–æ–π **create_app()** –≤ `core/`:
   - –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Flask, SQLAlchemy,
   - –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ Blueprint‚Äë–æ–≤ –∏–∑ –≤—Å–µ—Ö `features/`.
7. –ü–µ—Ä–µ–Ω–µ—Å–∏ –æ–±—â–∏–µ **—à–∞–±–ª–æ–Ω—ã, —Ñ–∏–ª—å—Ç—Ä—ã, –º–∏–∫—Å–∏–Ω—ã –∏ —É—Ç–∏–ª–∏—Ç—ã** –≤ `shared/` –∏–ª–∏ `interfaces/` –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏.
8. –ó–∞–¥–∞–π **Dockerfile** –∏ `docker-compose.yml` –¥–ª—è Flask + PostgreSQL.
9. –ù–∞–ø–∏—à–∏ **—Ç–µ—Å—Ç—ã**:
   - **unit** –¥–ª—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤ –∏ —Å–µ—Ä–≤–∏—Å–æ–≤,
   - **integration** ‚Äî –¥–ª—è —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤ –∏ DB –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–π.

---

## ‚úÖ 4. –ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞

- –ß—ë—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ —Å–ª–æ—ë–≤: **–¥–æ–º–µ–Ω ‚Üî –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ ‚Üî –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã**.
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ —Ñ–∏—á–∏ –∫–∞–∫ –º–æ–¥—É–ª–∏ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π —è–¥—Ä–∞.
- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ API –∏ —Å—Ç—Ä–∞–Ω–∏—Ü –ª–µ–≥–∫–æ –∏ –ø–æ–Ω—è—Ç–Ω–æ.
- –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∑–∞–º–æ–∫–∏—Ä–æ–≤–∞–Ω–∞ –≤ —Ç–µ—Å—Ç–∞—Ö —á–µ—Ä–µ–∑ —Å–µ—Ä–≤–∏—Å—ã –∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏.
- –ü—Ä–æ–µ–∫—Ç –≥–æ—Ç–æ–≤ –∫ Docker + PostgreSQL.
- –ö–æ–¥ –Ω–∞–ø–∏—Å–∞–Ω —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–æ, –ª–æ–≥–∏—á–Ω–æ, —Å –ø–æ–Ω—è—Ç–Ω–æ–π –Ω–∞–≤–∏–≥–∞—Ü–∏–µ–π –º–µ–∂–¥—É —Å–ª–æ—è–º–∏.

---

## üßæ 5. –§–æ—Ä–º–∞—Ç –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è Cursor

- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Markdown.
- –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è ‚Äî —á–∏—Å—Ç—ã–π –ø–ª–∞–Ω (—Ñ–∞–π–ª–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ + —à–∞–≥–∏ –ø–æ –∫–∞–∂–¥–æ–º—É —Å–ª–æ—é).
- –ù–µ –≤—Å—Ç–∞–≤–ª—è—Ç—å –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π –∫–æ–¥ ‚Äî —Ç–æ–ª—å–∫–æ —á—ë—Ç–∫–∏–π plan/refactor guide.
- –í—Å–µ –¥–µ—Ç–∞–ª–∏ ‚Äî –ø–∞—Ç—Ç–µ—Ä–Ω—ã –∏ —Å–≤—è–∑–∏ —Å–ª–æ—ë–≤ ‚Äî —É–∫–∞–∑–∞—Ç—å —á—ë—Ç–∫–æ –∏ —è—Å–Ω–æ.

---
