{% extends 'base.html' %} {% block head %}
<link rel="stylesheet" href="{{ url_for('static', filename='categories.css', v='1.1') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='pagination.css', v='1.0') }}"> {% endblock %} {% block content %} <div class="categories-container">
  <div class="categories-header">
    <h1>üìÇ –ö–∞—Ç–µ–≥–æ—Ä–∏–∏</h1>
    <p>–£–ø—Ä–∞–≤–ª—è–π—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏ —Ç–æ–≤–∞—Ä–æ–≤ –≤ –≤–∞—à–µ–º –º–∞–≥–∞–∑–∏–Ω–µ</p>
    <a href="{{ url_for('categories.category_create_ui') }}" class="create-btn"> ‚ûï –°–æ–∑–¥–∞—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é </a>
  </div> {% if categories %} <div class="categories-grid"> {% for category in categories %} <div class="category-card">
      <div class="category-id">{{ category.id }}</div>
      <a href="{{ url_for('categories.category_detail_ui', category_id=category.id) }}" class="category-name"> {{ category.name }} </a>
      <p class="category-description"> {{ category.description or '–û–ø–∏—Å–∞–Ω–∏–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç' }} </p>
      <div class="category-actions">
        <a href="{{ url_for('categories.category_edit_ui', category_id=category.id) }}" class="btn-edit"> ‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å </a>
        <a href="{{ url_for('categories.category_delete_ui', category_id=category.id) }}" class="btn-delete"> üóëÔ∏è –£–¥–∞–ª–∏—Ç—å </a>
      </div>
    </div> {% endfor %} </div>
  <!-- –ü–∞–≥–∏–Ω–∞—Ü–∏—è –∏ —Å–µ–ª–µ–∫—Ç–æ—Ä –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ -->
  <div class="pagination-container">
    <div class="pagination-info">
      <span>–ü–æ–∫–∞–∑–∞–Ω–æ {{ categories|length }} –∏–∑ {{ total_count }} –∫–∞—Ç–µ–≥–æ—Ä–∏–π</span>
      <span class="total-count">–í—Å–µ–≥–æ: {{ total_count }}</span>
    </div>
    <div class="pagination-controls">
      <!-- –°–µ–ª–µ–∫—Ç–æ—Ä –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É -->
      <div class="per-page-selector">
        <label for="per-page">–ù–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ:</label>
        <select id="per-page" class="per-page-select" onchange="changePerPage(this.value)">
          <option value="6" {% if per_page==6 %}selected{% endif %}>6</option>
          <option value="12" {% if per_page==12 %}selected{% endif %}>12</option>
          <option value="24" {% if per_page==24 %}selected{% endif %}>24</option>
          <option value="-1" {% if per_page==-1 %}selected{% endif %}>–í—Å–µ</option>
        </select>
      </div>
      <!-- –ü–∞–≥–∏–Ω–∞—Ü–∏—è --> {% if total_pages > 1 %} <div class="pagination">
        <!-- –ö–Ω–æ–ø–∫–∞ "–ü—Ä–µ–¥—ã–¥—É—â–∞—è" --> {% if current_page > 1 %} <a href="{{ url_for('categories.categories_list_ui', page=current_page-1, per_page=per_page) }}"
          class="pagination-item page-link"> ‚Üê </a> {% else %} <span class="pagination-item page-link disabled">‚Üê</span> {% endif %} <!-- –ù–æ–º–µ—Ä–∞ —Å—Ç—Ä–∞–Ω–∏—Ü --> {% set start_page =
        [1, current_page - 2] | max %} {% set end_page = [total_pages, current_page + 2] | min %} {% if start_page > 1 %} <a
          href="{{ url_for('categories.categories_list_ui', page=1, per_page=per_page) }}"
          class="pagination-item page-link">1</a> {% if start_page > 2 %} <span class="pagination-item page-link disabled">...</span> {% endif %} {% endif %} {% for page_num in
        range(start_page, end_page + 1) %} {% if page_num == current_page %} <span class="pagination-item page-link active">{{ page_num }}</span> {% else %} <a
          href="{{ url_for('categories.categories_list_ui', page=page_num, per_page=per_page) }}"
          class="pagination-item page-link">{{ page_num }}</a> {% endif %} {% endfor %} {% if end_page < total_pages %}
          {% if end_page < total_pages - 1 %}
          <span class="pagination-item page-link disabled">...</span> {% endif %} <a href="{{ url_for('categories.categories_list_ui', page=total_pages, per_page=per_page) }}"
            class="pagination-item page-link">{{ total_pages }}</a> {% endif %} <!-- –ö–Ω–æ–ø–∫–∞ "–°–ª–µ–¥—É—é—â–∞—è" --> {% if current_page < total_pages %}
            <a href="{{ url_for('categories.categories_list_ui', page=current_page+1, per_page=per_page) }}"
            class="pagination-item page-link"> ‚Üí </a> {% else %} <span class="pagination-item page-link disabled">‚Üí</span> {% endif %}
      </div> {% endif %}
    </div>
  </div> {% else %} <div class="empty-state">
    <h3>üì≠ –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</h3>
    <p>–°–æ–∑–¥–∞–π—Ç–µ –ø–µ—Ä–≤—É—é –∫–∞—Ç–µ–≥–æ—Ä–∏—é, —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç—É</p>
    <a href="{{ url_for('categories.category_create_ui') }}" class="create-btn"> ‚ûï –°–æ–∑–¥–∞—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é </a>
  </div> {% endif %}
</div>
<script>
  function changePerPage(value) {
    const urlParams = new URLSearchParams(window.location.search);
    urlParams.set('per_page', value);
    urlParams.set('page', '1'); // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –Ω–∞ –ø–µ—Ä–≤—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞
    window.location.search = urlParams.toString();
  }
</script> {% endblock %}